<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>vless Manager</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap');

  body {
    background: linear-gradient(135deg, #141e30, #243b55);
    color: #eee;
    font-family: 'Vazirmatn', sans-serif;
    margin: 0; padding: 0;
    display: flex;
    flex-direction: column;
    height: 100vh;
    justify-content: space-between;
    align-items: center;
  }

  header {
    width: 100%;
    background: rgba(255,255,255,0.1);
    padding: 15px 20px;
    display: flex;
    align-items: center;
    gap: 15px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.6);
  }

  #addBtn {
    background: #4caf50;
    border: none;
    color: white;
    font-size: 30px;
    font-weight: bold;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 8px #4caf50aa;
    transition: transform 0.3s ease;
  }

  #addBtn:hover {
    transform: rotate(90deg);
    box-shadow: 0 0 16px #76ff03;
  }

  #pasteText {
    font-size: 18px;
    user-select: none;
    flex-grow: 1;
  }

  main {
    width: 90%;
    max-width: 600px;
    margin-top: 30px;
    background: rgba(255,255,255,0.05);
    padding: 20px;
    border-radius: 12px;
    min-height: 300px;
    overflow-y: auto;
    box-shadow: 0 0 15px #00ff99aa;
  }

  .config-item {
    background: #222f44;
    margin: 8px 0;
    padding: 10px 15px;
    border-radius: 8px;
    font-family: monospace;
    word-break: break-all;
    box-shadow: 0 0 8px #00ff99bb;
    position: relative;
  }

  .config-item::before {
    content: '✔️';
    position: absolute;
    right: 10px;
    top: 10px;
    font-size: 18px;
    color: #00ff99;
  }

  footer {
    width: 100%;
    background: rgba(255,255,255,0.1);
    padding: 15px 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
  }

  #connectBtn {
    width: 60px;
    height: 60px;
    cursor: pointer;
    border: none;
    background: transparent;
    transition: transform 0.5s ease;
  }

  svg {
    fill: #00ff99;
    transition: fill 0.4s ease;
  }

  /* مثلث */
  .triangle path {
    transition: d 0.5s ease;
  }

  /* مربع */
  .square path {
    transition: d 0.5s ease;
  }

</style>
</head>
<body>

<header>
  <button id="addBtn" title="اضافه کردن کانفیگ">+</button>
  <div id="pasteText">Past from clipboard</div>
</header>

<main id="configList">
  <!-- کانفیگ‌ها اینجا اضافه میشن -->
</main>

<footer>
  <button id="connectBtn" title="وصل یا قطع فیلترشکن" aria-pressed="false" aria-label="وصل یا قطع فیلترشکن">
    <!-- آیکون مثلث (وصل نشده) -->
    <svg class="triangle" width="50" height="50" viewBox="0 0 24 24">
      <path d="M8 5v14l11-7z"/>
    </svg>
  </button>
</footer>

<script>
  const addBtn = document.getElementById('addBtn');
  const configList = document.getElementById('configList');
  const connectBtn = document.getElementById('connectBtn');
  const pasteText = document.getElementById('pasteText');

  // بررسی اولیه اتصال (فرض کنیم از localStorage می‌گیریم)
  let isConnected = localStorage.getItem('vless_connected') === 'true';
  updateConnectButton();

  function updateConnectButton() {
    if (isConnected) {
      // نمایش مربع (قطع)
      connectBtn.innerHTML = `
        <svg class="square" width="50" height="50" viewBox="0 0 24 24">
          <path d="M6 6h12v12H6z"/>
        </svg>
      `;
      connectBtn.setAttribute('aria-pressed', 'true');
      connectBtn.title = 'قطع فیلترشکن';
    } else {
      // نمایش مثلث (وصل)
      connectBtn.innerHTML = `
        <svg class="triangle" width="50" height="50" viewBox="0 0 24 24">
          <path d="M8 5v14l11-7z"/>
        </svg>
      `;
      connectBtn.setAttribute('aria-pressed', 'false');
      connectBtn.title = 'وصل فیلترشکن';
    }
  }

  connectBtn.addEventListener('click', () => {
    if (isConnected) {
      disconnectVPN();
    } else {
      requestAccessAndConnect();
    }
  });

  function requestAccessAndConnect() {
    // اینجا می‌تونیم درخواست دسترسی فیلترشکن یا چیزی شبیه به اون رو شبیه‌سازی کنیم
    // برای نمونه، فرض می‌کنیم همیشه اجازه می‌ده
    alert('دسترسی به فیلترشکن داده شد! (شبیه‌سازی)');
    isConnected = true;
    localStorage.setItem('vless_connected', 'true');
    updateConnectButton();
  }

  function disconnectVPN() {
    alert('فیلترشکن قطع شد! (شبیه‌سازی)');
    isConnected = false;
    localStorage.setItem('vless_connected', 'false');
    updateConnectButton();
  }

  addBtn.addEventListener('click', async () => {
    try {
      // خواندن متن کلیپ‌بورد
      const text = await navigator.clipboard.readText();

      // چک کردن اینکه کانفیگ vless هست یا نه (مثلاً ساده چک می‌کنیم if contains vless://)
      if (text.trim().startsWith('vless://')) {
        // اضافه کردن به لیست کانفیگ‌ها
        addConfig(text.trim());
        pasteText.textContent = 'کانفیگ اضافه شد!';
        setTimeout(() => {
          pasteText.textContent = 'Past from clipboard';
        }, 3000);
      } else {
        alert('متن کلیپ‌بورد کانفیگ vless معتبر نیست!');
      }
    } catch (err) {
      alert('دسترسی به کلیپ‌بورد امکان‌پذیر نیست یا خطا رخ داد.');
    }
  });

  function addConfig(configText) {
    const div = document.createElement('div');
    div.className = 'config-item';
    div.textContent = configText;
    configList.prepend(div);
  }

  // اگر میخوای از قبل کانفیگ‌ها رو از localStorage بارگذاری کنی، اینجا می‌تونی اضافه کنی.
</script>

</body>
</html>
