<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ù…ÙˆØ²ÛŒÚ© Ù¾Ù„ÛŒØ± Ù¾ÛŒØ´Ø±ÙØªÙ‡ - Ù„ÛŒØ³Øª Ù…ÙˆØ²ÛŒÚ©</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap');
  body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: 'Vazirmatn', sans-serif;
    background: linear-gradient(270deg, #1a2a6c, #b21f1f, #fdbb2d);
    background-size: 600% 600%;
    animation: bgGradient 25s ease infinite;
    color: #eee;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  @keyframes bgGradient {
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
  }
  h1 {
    margin: 20px 0;
    text-shadow: 0 0 10px #ffd700;
  }
  #music-list {
    width: 95%;
    max-width: 450px;
    max-height: 300px;
    overflow-y: auto;
    background: rgba(0,0,0,0.6);
    border-radius: 15px;
    padding: 15px;
    box-shadow: 0 0 25px #ffd700;
  }
  .track {
    padding: 10px;
    border-bottom: 1px solid #444;
    cursor: pointer;
    transition: background 0.3s;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .track:hover {
    background: #ffd700;
    color: #111;
  }
  .track.active {
    background: #ffb700;
    color: #111;
    font-weight: bold;
  }
  #player-controls {
    margin-top: 25px;
    width: 90%;
    max-width: 450px;
    background: rgba(0,0,0,0.7);
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 0 25px #ffd700;
    text-align: center;
  }
  audio {
    width: 100%;
    outline: none;
    border-radius: 12px;
    box-shadow: 0 0 15px #ffb700;
  }
  .buttons {
    margin-top: 15px;
    display: flex;
    justify-content: center;
    gap: 20px;
  }
  button {
    background: #ffb700;
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    font-size: 24px;
    cursor: pointer;
    color: #111;
    font-weight: bold;
    box-shadow: 0 0 15px #ffb700;
    transition: background 0.3s ease;
  }
  button:hover {
    background: #ffd633;
  }
</style>
</head>
<body>

<h1>ğŸµ Ù…ÙˆØ²ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ú¯ÙˆØ´ÛŒ Ø´Ù…Ø§</h1>
<div id="music-list">Ù‡ÛŒÚ† Ù…ÙˆØ²ÛŒÚ©ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯ ÛŒØ§ Ù…Ù†ØªØ¸Ø± Ù„ÛŒØ³Øª Ù…ÙˆØ²ÛŒÚ©â€ŒÙ‡Ø§ Ù‡Ø³ØªÛŒÙ…...</div>

<div id="player-controls" style="display:none;">
  <audio id="audio-player" controls></audio>
  <div class="buttons">
    <button id="prev" title="Ø¢Ù‡Ù†Ú¯ Ù‚Ø¨Ù„ÛŒ">â®ï¸</button>
    <button id="play-pause" title="Ù¾Ø®Ø´ / ØªÙˆÙ‚Ù">â–¶ï¸</button>
    <button id="next" title="Ø¢Ù‡Ù†Ú¯ Ø¨Ø¹Ø¯ÛŒ">â­ï¸</button>
  </div>
</div>

<script>
  let musicListElement = document.getElementById('music-list');
  let audioPlayer = document.getElementById('audio-player');
  let playerControls = document.getElementById('player-controls');
  let playPauseBtn = document.getElementById('play-pause');
  let prevBtn = document.getElementById('prev');
  let nextBtn = document.getElementById('next');

  let tracks = [];
  let currentIndex = -1;

  // ØªØ§Ø¨Ø¹ÛŒ Ú©Ù‡ Ø§Ø² Ø§Ù†Ø¯Ø±ÙˆÛŒØ¯ ØµØ¯Ø§ Ø²Ø¯Ù‡ Ù…ÛŒØ´Ù‡ Ùˆ Ù„ÛŒØ³Øª Ù…ÙˆØ²ÛŒÚ©â€ŒÙ‡Ø§ Ø±Ùˆ Ù…ÛŒØ¯Ù‡ Ø¨Ù‡ ØµÙˆØ±Øª JSON string
  function setMusicList(jsonString) {
    try {
      tracks = JSON.parse(jsonString);
      if(!Array.isArray(tracks) || tracks.length === 0) {
        musicListElement.innerHTML = "Ù‡ÛŒÚ† Ù…ÙˆØ²ÛŒÚ©ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.";
        playerControls.style.display = "none";
        return;
      }
      currentIndex = 0;
      renderMusicList();
      loadTrack(currentIndex);
      playerControls.style.display = "block";
    } catch(e) {
      musicListElement.innerHTML = "Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù„ÛŒØ³Øª Ù…ÙˆØ²ÛŒÚ©â€ŒÙ‡Ø§";
      console.error(e);
    }
  }

  function renderMusicList() {
    musicListElement.innerHTML = "";
    tracks.forEach((track, i) => {
      let div = document.createElement('div');
      div.className = "track" + (i === currentIndex ? " active" : "");
      div.textContent = track.title || ("Ø¢Ù‡Ù†Ú¯ Ø´Ù…Ø§Ø±Ù‡ " + (i+1));
      div.title = track.artist ? (track.artist + " - " + track.album) : "";
      div.onclick = () => {
        if(currentIndex !== i){
          currentIndex = i;
          loadTrack(currentIndex);
          playAudio();
          updateActiveTrack();
        }
      };
      musicListElement.appendChild(div);
    });
  }

  function loadTrack(index) {
    if(index < 0 || index >= tracks.length) return;
    const track = tracks[index];
    audioPlayer.src = track.path;
    audioPlayer.load();
  }

  function updateActiveTrack() {
    let trackDivs = musicListElement.querySelectorAll('.track');
    trackDivs.forEach((div,i) => {
      if(i === currentIndex) div.classList.add('active');
      else div.classList.remove('active');
    });
  }

  function playAudio() {
    audioPlayer.play();
    playPauseBtn.textContent = "â¸ï¸";
  }

  function pauseAudio() {
    audioPlayer.pause();
    playPauseBtn.textContent = "â–¶ï¸";
  }

  playPauseBtn.onclick = () => {
    if(audioPlayer.paused) {
      playAudio();
    } else {
      pauseAudio();
    }
  };

  prevBtn.onclick = () => {
    if(tracks.length === 0) return;
    currentIndex = (currentIndex - 1 + tracks.length) % tracks.length;
    loadTrack(currentIndex);
    playAudio();
    updateActiveTrack();
  };

  nextBtn.onclick = () => {
    if(tracks.length === 0) return;
    currentIndex = (currentIndex + 1) % tracks.length;
    loadTrack(currentIndex);
    playAudio();
    updateActiveTrack();
  };

  audioPlayer.onended = () => {
    nextBtn.onclick();
  };

  // Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ù…Ø­Ù„ÛŒØŒ ÛŒÚ© Ù„ÛŒØ³Øª ÙØ±Ø¶ÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ù…ÛŒâ€ŒÚ¯Ø°Ø§Ø±ÛŒÙ… (Ø§ÛŒÙ† Ø®Ø· Ø±Ùˆ ØªÙˆÛŒ Ø§Ù¾ ÙˆØ§Ù‚Ø¹ÛŒ Ø­Ø°Ù Ú©Ù†)
  /*
  setMusicList(JSON.stringify([
    {title:"Ø¢Ù‡Ù†Ú¯ ØªØ³Øª Û±", artist:"Ø®ÙˆØ§Ù†Ù†Ø¯Ù‡ Û±", album:"Ø¢Ù„Ø¨ÙˆÙ… Û±", path:"sample1.mp3"},
    {title:"Ø¢Ù‡Ù†Ú¯ ØªØ³Øª Û²", artist:"Ø®ÙˆØ§Ù†Ù†Ø¯Ù‡ Û²", album:"Ø¢Ù„Ø¨ÙˆÙ… Û²", path:"sample2.mp3"}
  ]));
  */

</script>

</body>
</html>
