<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>موزیک پلیر پیشرفته</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap');
  body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: 'Vazirmatn', sans-serif;
    overflow: hidden;
    background: linear-gradient(270deg, #ff416c, #ff4b2b);
    background-size: 400% 400%;
    animation: bgAnimation 20s ease infinite;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  @keyframes bgAnimation {
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
  }

  .player-container {
    background: rgba(0,0,0,0.6);
    padding: 30px;
    border-radius: 25px;
    box-shadow: 0 0 30px rgba(255,255,255,0.3);
    width: 350px;
    color: white;
    backdrop-filter: blur(10px);
    text-align: center;
  }

  h1 {
    margin-bottom: 15px;
    text-shadow: 0 0 10px #ff4b2b;
  }

  input[type="file"] {
    display: none;
  }

  label {
    display: inline-block;
    background: #ff416c;
    padding: 12px 25px;
    border-radius: 50px;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.3s ease;
    box-shadow: 0 0 10px #ff416c;
    margin-bottom: 20px;
  }

  label:hover {
    background: #ff4b2b;
  }

  .track-info {
    margin-bottom: 20px;
    font-size: 18px;
    min-height: 24px;
  }

  audio {
    width: 100%;
    outline: none;
    border-radius: 15px;
    box-shadow: 0 0 15px #ff4b2b;
  }

  .controls {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
  }

  button {
    background: #ff416c;
    border: none;
    border-radius: 50%;
    width: 45px;
    height: 45px;
    cursor: pointer;
    color: white;
    font-size: 20px;
    box-shadow: 0 0 15px #ff416c;
    transition: background 0.3s ease;
  }

  button:hover {
    background: #ff4b2b;
  }

  .volume-slider {
    -webkit-appearance: none;
    width: 120px;
    height: 6px;
    background: #ff4b2b;
    border-radius: 10px;
    cursor: pointer;
    box-shadow: 0 0 8px #ff4b2b;
  }

  .volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 22px;
    height: 22px;
    background: white;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 5px #ff416c;
    transition: background 0.3s ease;
  }
  .volume-slider::-webkit-slider-thumb:hover {
    background: #ff416c;
  }

  /* Firefox */
  .volume-slider::-moz-range-thumb {
    width: 22px;
    height: 22px;
    background: white;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 5px #ff416c;
    transition: background 0.3s ease;
  }
  .volume-slider::-moz-range-thumb:hover {
    background: #ff416c;
  }

  /* Animated bars */
  .bars {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    gap: 4px;
  }
  .bar {
    width: 6px;
    height: 20px;
    background: #ff4b2b;
    animation: barAnimation 1s infinite ease-in-out;
    border-radius: 2px;
  }
  .bar:nth-child(1) { animation-delay: 0s;}
  .bar:nth-child(2) { animation-delay: 0.15s;}
  .bar:nth-child(3) { animation-delay: 0.3s;}
  .bar:nth-child(4) { animation-delay: 0.45s;}
  .bar:nth-child(5) { animation-delay: 0.6s;}

  @keyframes barAnimation {
    0%, 100% {height: 20px;}
    50% {height: 50px;}
  }
</style>
</head>
<body>

<div class="player-container">
  <h1>🎵 موزیک پلیر خفن</h1>
  <label for="file-input">📂 انتخاب آهنگ</label>
  <input type="file" id="file-input" accept="audio/*" multiple />
  <div class="track-info" id="track-info">هیچ آهنگی انتخاب نشده</div>
  <audio id="audio-player" controls></audio>

  <div class="controls">
    <button id="prev" title="آهنگ قبلی">⏮️</button>
    <button id="play-pause" title="پخش/توقف">▶️</button>
    <button id="next" title="آهنگ بعدی">⏭️</button>
    <input type="range" id="volume-slider" class="volume-slider" min="0" max="1" step="0.01" title="میزان صدا" />
  </div>

  <div class="bars">
    <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
  </div>
</div>

<script>
  const fileInput = document.getElementById('file-input');
  const audioPlayer = document.getElementById('audio-player');
  const trackInfo = document.getElementById('track-info');
  const playPauseBtn = document.getElementById('play-pause');
  const prevBtn = document.getElementById('prev');
  const nextBtn = document.getElementById('next');
  const volumeSlider = document.getElementById('volume-slider');

  let tracks = [];
  let currentIndex = 0;

  volumeSlider.value = 0.5;
  audioPlayer.volume = 0.5;

  fileInput.addEventListener('change', (e) => {
    tracks = Array.from(e.target.files);
    if(tracks.length > 0) {
      currentIndex = 0;
      loadTrack(currentIndex);
      audioPlayer.play();
      playPauseBtn.textContent = '⏸️';
    }
  });

  function loadTrack(index) {
    const track = tracks[index];
    if(!track) {
      trackInfo.textContent = "هیچ آهنگی انتخاب نشده";
      audioPlayer.src = "";
      return;
    }
    const url = URL.createObjectURL(track);
    audioPlayer.src = url;
    trackInfo.textContent = track.name;
  }

  playPauseBtn.addEventListener('click', () => {
    if(audioPlayer.paused) {
      audioPlayer.play();
      playPauseBtn.textContent = '⏸️';
    } else {
      audioPlayer.pause();
      playPauseBtn.textContent = '▶️';
    }
  });

  prevBtn.addEventListener('click', () => {
    if(tracks.length === 0) return;
    currentIndex = (currentIndex - 1 + tracks.length) % tracks.length;
    loadTrack(currentIndex);
    audioPlayer.play();
    playPauseBtn.textContent = '⏸️';
  });

  nextBtn.addEventListener('click', () => {
    if(tracks.length === 0) return;
    currentIndex = (currentIndex + 1) % tracks.length;
    loadTrack(currentIndex);
    audioPlayer.play();
    playPauseBtn.textContent = '⏸️';
  });

  audioPlayer.addEventListener('ended', () => {
    nextBtn.click();
  });

  volumeSlider.addEventListener('input', () => {
    audioPlayer.volume = volumeSlider.value;
  });
</script>

</body>
</html>
